Based on your code and issue, it appears that the auto-fitted kriging variants (spherical, Gaussian, exponential) are not actually behaving differently from the default kriging model, which uses a fixed 'linear' variogram. Here's what's likely going wrong and how to fix it:

‚ùå Current Problem
Your intention was to allow the user to select a variogram model (e.g. 'spherical', 'gaussian', 'exponential') and to have PyKrige auto-fit the variogram parameters for each model. However:

You're using the method parameter to distinguish between models (e.g. 'kriging', 'kriging_auto_spherical', etc.).

But inside your generate_geo_json_grid function, the logic for handling these different model names is missing.

More importantly, auto_fit_variogram is only triggered under limited conditions ‚Äî specifically only when show_variance=True.

As a result:

Even if the user selects "Kriging (Auto-Fitted Spherical)", auto_fit_variogram may not actually be set to True, or the code path may still default to using 'linear'.

‚úÖ What to Fix
1. Ensure you actually set the right parameters based on the model
You likely need logic outside the function (or when calling the function) that sets these flags correctly:

python
Copy
Edit
if method == 'kriging_auto_spherical':
    auto_fit_variogram = True
    variogram_model = 'spherical'
elif method == 'kriging_auto_gaussian':
    auto_fit_variogram = True
    variogram_model = 'gaussian'
elif method == 'kriging_auto_exponential':
    auto_fit_variogram = True
    variogram_model = 'exponential'
Then call:

python
Copy
Edit
generate_geo_json_grid(
    wells_df,
    center_point,
    radius_km,
    resolution,
    method='kriging',
    show_variance=False,
    auto_fit_variogram=True,
    variogram_model='spherical'  # or 'gaussian', 'exponential'
)
This way, you're always using method='kriging', but controlling the variogram behavior using the flags.

2. Ensure the kriging block actually uses those settings
Your code does include logic like:

python
Copy
Edit
actual_model = variogram_model if auto_fit_variogram else 'linear'
‚úÖ That‚Äôs good ‚Äî but make sure the correct parameters are reaching this point based on what the user selected.

üß™ How to Test if Auto-Fitting Works
To verify that pykrige is actually doing different things for different variogram models:

Print out the OK.variogram_model_parameters after calling:

python
Copy
Edit
OK = OrdinaryKriging(...)
print(f"Auto-fit parameters for {variogram_model}: {OK.variogram_model_parameters}")
You should see different values for different models. If they‚Äôre identical, the fitting is not working properly.

‚úÖ Suggested Update Block
Here‚Äôs a clean way to structure the logic before calling the interpolation:

python
Copy
Edit
if method.startswith("kriging_auto_"):
    auto_fit_variogram = True
    variogram_model = method.split("_")[-1]  # 'spherical', 'gaussian', etc.
    method = 'kriging'  # Normalize method name
else:
    auto_fit_variogram = False
    variogram_model = 'linear'
Then pass all values normally to your generate_geo_json_grid.

